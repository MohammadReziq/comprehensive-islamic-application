# مواصفات مشروع «صلاتي حياتي» — نسخة للعميل

هذه الوثيقة تشرح التطبيق كما هو اليوم، وما الذي يعمل وما الذي لم يُنجز بعد، وما المخطط إنجازه قريباً. الغرض منها أن تعطيها للعميل (أو لمستثمر أو شريك) ليقرأها ويفهم المشروع ويُبدي رأيه دون الحاجة لخلفية تقنية.

---

## 1. ما هو التطبيق؟

**«صلاتي حياتي»** تطبيق يربط بين **البيت والمسجد** في موضوع **حضور الأطفال للصلاة**.

- **ولي الأمر** يضيف أبناءه ويربطهم بمسجد، ويطّلع على حضورهم اليومي ونقاطهم وملاحظات المشرف دون أن يكون هو من يسجّل الحضور.
- **المسجد (إمام أو مشرف)** يسجّل تحضير الطلاب بسرعة (مسح باركود أو اختيار من قائمة)، والنظام يحسب النقاط والسلاسل والمسابقات تلقائياً.
- **الطفل** له بطاقة (باركود) يعرضها للمشرف عند التحضير؛ ويمكن لاحقاً أن يفتح التطبيق من جواله ويرى باركوده وحضوره دون استعارة تلفون والده.

الفكرة: شفافية وبساطة — الأب يطمئن، المسجد يملك أداة تحضير منظمة، والطفل يتحمّس للنقاط والمسابقات.

---

## 2. من يستخدم التطبيق؟ (الأدوار)

| الدور | من هو؟ | كيف يدخل؟ |
|-------|--------|-----------|
| **ولي أمر** | أب أو أم يتابع أبناءه | يسجّل في التطبيق ويختار «ولي أمر» |
| **إمام** | مدير المسجد | يسجّل ويختار «إمام» وينشئ مسجداً، ثم ينتظر موافقة إدارة التطبيق |
| **مشرف** | من يسجّل التحضير في المسجد (مثلاً معلم أو متطوع) | لا يسجّل كـ «مشرف» — الإمام يرسله **كود دعوة** فينضم للمسجد عبر «انضمام لمسجد» ويدخل الكود |
| **مدير النظام (سوبر أدمن)** | من يدير التطبيق ككل | حساب خاص؛ يوافق أو يرفض طلبات المساجد الجديدة |

**الطفل:** لا يملك حساباً مستقلاً. له **ملف** داخل حساب ولي الأمر (اسم، باركود، ربط بمسجد). المشرف يمسح حضوره؛ ولي الأمر يتابع من تطبيقه. (لاحقاً: إمكانية «ربط جهاز الابن» ليرى الابن باركوده من جواله.)

---

## 3. ما الذي يعمل اليوم؟ (حسب الدور)

### مدير النظام (سوبر أدمن)

- يرى **طلبات المساجد** الجديدة (إمام طلب إنشاء مسجد).
- يقدر **يوافق** أو **يرفض** الطلب.
- له قائمة جانبية (دراور) وتسجيل خروج وملف شخصي.

**الخلاصة:** المطلوب لهذا الدور متوفر.

---

### الإمام

- يدخل من **بوابة المسجد** إلى **لوحة المدير** (بعد موافقة مدير النظام).
- يرى: بيانات المسجد، **أكواد الدعوة** (للمشرفين ولانضمام أولياء الأمور بأطفالهم)، **طلبات انضمام** للمسجد، قائمة **المشرفين**، **حضور اليوم**.
- من اللوحة يصل إلى:
  - **التحضير:** مسح باركود الطالب أو اختياره من قائمة وتسجيل حضوره.
  - **الطلاب:** قائمة طلاب المسجد، والضغط على طالب يفتح ملفه.
  - **طلبات التصحيح:** قائمة الطلبات التي يرسلها أولياء الأمور (مثلاً: «ابني حضر الظهر ولم يُسجّل») — الإمام يوافق أو يرفض.
  - **الملاحظات:** إرسال ملاحظة لولي أمر عن طفل معيّن.
  - **المسابقات:** إنشاء مسابقة (مثلاً «أفضل حضور لهذا الشهر»)، تفعيلها أو إيقافها، وعرض الترتيب.
- له قائمة جانبية وشريط سفلي (لوحة المدير | الملف الشخصي).

**ما ينقص حالياً:**  
- لا يمكن للإمام أن يحدد **موقع المسجد** (خط عرض وطول)؛ التطبيق يستخدم موقعاً افتراضياً (مكة) لأوقات الصلاة في التحضير.  
- **التسجيل لا يتحقق من وقت الصلاة:** نظرياً يمكن للمشرف أن يسجّل حضور صلاة في وقت غير وقتها (مثلاً تسجيل الظهر في وقت العشاء) — المخطط منع ذلك في المرحلة القادمة.

---

### المشرف

- ينضم للمسجد بـ **كود الدعوة** من الإمام، ثم يدخل إلى **لوحة المشرف**.
- يملك نفس الإجراءات العملية: **تحضير** (مسح باركود أو اختيار طالب)، **الطلاب**، **طلبات التصحيح** (عرض وموافقة/رفض)، **الملاحظات** (إرسال)، **المسابقات** (عرض الترتيب فقط — لا إنشاء ولا تفعيل).
- له قائمة جانبية وشريط سفلي.

**ما ينقص حالياً:**  
نفس نقطة التحقق من وقت الصلاة — لا يوجد بعد منع لتسجيل حضور صلاة خارج وقتها.

---

### ولي الأمر

- بعد تسجيل الدخول يصل إلى **الرئيسية:** ترحيب، **حضور اليوم** لأطفاله (يتحدّث فوراً عند تسجيل المشرف — تحديث مباشر)، قائمة **أطفالي**، ومن القائمة الجانبية **صندوق الملاحظات** (ملاحظات المشرف عن أطفاله).
- من **أطفالي:** يقدر يضيف طفلاً، يفتح **بطاقة الطفل** (اسم، باركود، نسخ)، ويربط الطفل بمسجد (إدخال كود المسجد).
- **لا يوجد حالياً:**  
  - **زر أو شاشة لـ «طلب تصحيح»** — لو أن ابنه حضر صلاة ولم يُسجّل، لا يستطيع من التطبيق أن يرسل طلباً للإمام/المشرف (المنطق جاهز في النظام لكن الواجهة غير مبنية).  
  - **شاشة «المسابقة النشطة»** — لا يرى ترتيب أبنائه في المسابقة الحالية للمسجد.  
  - **عرض الابن للباركود من جواله** — الابن لا يملك طريقة لفتح التطبيق ورؤية باركوده فقط (دون حساب ولي الأمر)، فيضطر لاستعارة تلفون الأب أو طباعة الباركود.

---

## 4. ما الذي لم يُنجز بعد؟ (ملخص للعميل)

| البند | شرح بسيط | الأولوية |
|-------|-----------|----------|
| **طلب تصحيح من ولي الأمر** | ولي الأمر يحتاج زراً أو شاشة يطلب فيها «إضافة حضور لصلاة معيّنة في تاريخ معيّن» (مثلاً ابني حضر الظهر ولم يُسجّل). الإمام/المشرف يراجع الطلب وواجهتهم جاهزة. | عالية |
| **التحقق من وقت الحضور** | منع تسجيل حضور صلاة إلا في وقتها (من أذانها حتى ساعة بعد الأذان). الاستثناء: طلب التصحيح من ولي الأمر. | عالية |
| **الإمام يحدد موقع المسجد** | إضافة إعدادات تسمح للإمام بإدخال موقع المسجد (أو استخدام «موقعي الحالي») حتى تُحسب أوقات الصلاة حسب موقع المسجد فعلياً. | عالية |
| **عرض الابن للباركود (ربط جهاز الابن)** | ولي الأمر يولّد «كود ربط» من بطاقة الطفل؛ الابن يفتح التطبيق ويدخل الكود فيربط جواله بملفه؛ بعدها يرى من جواله اسمه وباركوده (وحضور اليوم إن أردنا) دون حساب ولي أمر. | عالية |
| **شاشة المسابقة النشطة لولي الأمر** | ولي الأمر يرى المسابقة الحالية لمسجد أطفاله وترتيب أبنائه فيها. | متوسطة |
| **تحديث فوري للتصحيحات والملاحظات** | عند وصول طلب تصحيح جديد أو ملاحظة جديدة، ظهورها فوراً دون الحاجة لسحب القائمة يدوياً. | متوسطة |
| **إلغاء حضور خاطئ** | لو المشرف سجّل حضوراً بالخطأ، إمكانية «إلغاء» هذا التسجيل خلال مدة محددة (مثلاً 24 ساعة) مع تحديث نقاط الطفل تلقائياً. | متوسطة |
| **رسائل خطأ واضحة** | عند فشل أي عملية (كود مسجد خاطئ، طلب مرفوض، عدم إمكانية التسجيل خارج الوقت المسموح) عرض رسالة مفهومة للمستخدم. | تحسين |
| **سحب للتحديث وتحميل أنيق** | في القوائم (حضور اليوم، التصحيحات، الملاحظات) إمكانية سحب الشاشة للتحديث، وعرض «هيكل تحميل» أنيق بدل دوّار فقط. | تحسين |
| **إشعارات (تنبيهات)** | إرسال تنبيه للولي عند تسجيل حضور ابنه، أو عند موافقة على طلب تصحيح، أو عند وصول ملاحظة من المشرف. | لاحقاً |
| **الإعلانات** | إمكانية المسجد نشر إعلان لأولياء الأمور (الجدول موجود في النظام؛ الواجهة مؤجّلة). | لاحقاً |
| **أقرب مسجد** | عند ربط الطفل بمسجد، اقتراح أقرب المساجد حسب موقع ولي الأمر. | لاحقاً |
| **الجوائز والشارات** | عرض شارات وجوائز الطفل في واجهة ولي الأمر (البيانات محسوبة في الخلفية؛ الواجهة لاحقاً). | لاحقاً |

---

## 5. ما المخطط إنجازه في المرحلة القادمة؟ (ترتيب منطقي)

**المرحلة الأولى — إغلاق الثغرات الأساسية:**

1. **شاشة طلب التصحيح لولي الأمر:** زر من بطاقة الطفل (أو من قائمة أطفالي) يفتح شاشة يختار فيها الصلاة والتاريخ وملاحظة إن أراد، ويرسل الطلب للإمام/المشرف.
2. **التحقق من وقت الحضور:** عدم السماح بتسجيل حضور صلاة إلا من وقت أذانها حتى نهاية النافذة (ساعة بعد الأذان). إن حاول المشرف التسجيل خارج الوقت تظهر رسالة واضحة. الاستثناء الوحيد: الموافقة على طلب تصحيح من ولي الأمر.
3. **الإمام يحدد موقع المسجد:** في إعدادات المسجد (أو عند الإنشاء) إضافة إمكانية تحديد الموقع (خريطة أو «موقعي الحالي» أو إدخال يدوي) واستخدامه لحساب أوقات الصلاة في التحضير.
4. **عرض الابن للباركود / ربط جهاز الابن:** ولي الأمر من بطاقة الطفل يفعّل «ربط جهاز الابن» فيظهر كود؛ الابن يفتح التطبيق ويدخل الكود فيربط جواله بملفه؛ بعدها يرى شاشة بسيطة: اسمي، باركودي، (اختياري) حضور اليوم ونقاطي.

**المرحلة التالية:**

5. شاشة المسابقة النشطة لولي الأمر.  
6. تحديث فوري (بدون سحب) لطلبات التصحيح والملاحظات.  
7. إلغاء حضور خاطئ (للإمام/المشرف) خلال مدة محددة.  
8. رسائل خطأ موحدة وواضحة.  
9. سحب للتحديث وتحميل أنيق في القوائم.  
10. لاحقاً: إشعارات، إعلانات، أقرب مسجد، جوائز وشارات (واجهة)، إلخ.

---

## 6. كيف يتصل الجميع؟ (صورة مبسطة)

- **مدير النظام** يوافق أو يرفض طلبات إنشاء المساجد → بعد الموافقة **الإمام** يرى لوحته ويدير مسجده.
- **الإمام** يدير المسجد والمشرفين والطلاب والمسابقات وطلبات التصحيح والملاحظات؛ **المشرف** ينضم بدعوة ويسجّل التحضير ويراجع الطلبات ويرسل الملاحظات (ولا ينشئ مسابقات).
- **الحضور** يُسجّل من الإمام أو المشرف → **النقاط والسلاسل** تُحدَّث تلقائياً → **ولي الأمر** يرى حضور اليوم فوراً (تحديث مباشر).
- **طلب التصحيح:** ولي الأمر يطلب (الواجهة قيد الإنجاز) → الإمام/المشرف يراجع وينفّذ (الواجهة جاهزة).
- **الملاحظات:** المشرف أو الإمام يرسل → ولي الأمر يقرأ من صندوق الملاحظات.
- **المسابقات:** الإمام ينشئ ويفعّل → المشرف يرى الترتيب → ولي الأمر (شاشة المسابقة النشطة قيد الإنجاز).

---

## 7. ملاحظات مهمة للعميل

- **الأمان والصلاحيات:** كل دور يرى ويُجري فقط ما يسمح به دوره (مثلاً المشرف لا ينشئ مسابقات، ولي الأمر لا يسجّل حضوراً مباشرة). النظام مبني ليدعم ذلك من الخلفية.
- **الطفل لا يسجّل دخولاً:** الطفل له ملف وباركود تحت حساب ولي الأمر؛ المشرف يمسح الحضور. الخيار المستقبلي «ربط جهاز الابن» يعطيه فقط عرضاً لباركوده وحضوره من جواله دون حساب مستقل.
- **التوقيت وأوقات الصلاة:** المخطط أن يكون «اليوم» وتوقيت الحضور حسب **توقيت المسجد**، وأوقات الصلاة حسب **موقع المسجد** (بعد إضافة إعدادات الموقع للإمام).
- **ما نؤجّله عمداً:** اقتراح «أقرب مسجد»، و«اعتراف/تحقق المسجد» المعقد، وإعلانات المسجد، وواجهة مسجد أساسي/ثانوي — حتى نستكمل الثغرات الأساسية وتجربة الاستخدام الرئيسية.

---

## 8. طلب من العميل

نرجو منك بعد القراءة أن تُبدي رأيك في:

1. **وضوح الأدوار والوظائف:** هل الصورة واضحة؟ هل تفتقد شيئاً تريده كولي أمر أو كإمام/مشرف؟
2. **ترتيب الأولويات:** هل توافق على أن نُنجز أولاً (طلب التصحيح، التحقق من وقت الحضور، موقع المسجد، ربط جهاز الابن) ثم نكمل المسابقة النشطة والتحديث الفوري والتحسينات؟
3. **عرض الابن للباركود:** هل ترى أن «كود ربط» و«شاشة الابن» (الاسم + الباركود فقط) كافية لحاجة ابنك، أم تريد إضافة شيء (مثلاً عرض النقاط أو السلسلة فقط للابن)؟
4. **أي ميزة مؤجّلة** تود أن نرفع أولويتها (مثلاً الإعلانات، أو أقرب مسجد)؟

يمكنك كتابة ملاحظاتك في نهاية الوثيقة أو إرسالها بشكل منفصل.

---

*هذه المواصفات مبنية على الدراسة التقنية الداخلية (STUDY_COMPLETE_WHAT_WE_HAVE_AND_WHAT_NEXT) ومُترجمة إلى لغة مناسبة للعميل. تاريخ الإعداد: 2026-02-18.*
