# خطة تنفيذ الخرائط ومواقع المساجد

> **المرجع:** `docs/study_maps_and_locations.md`  
> **الخطوة التالية والتفاصيل:** `tasks/todo.md`

---

## المرحلة 1 — تأسيس ✅ (منجزة)

- [x] إضافة `flutter_map`، `latlong2`، `geolocator`.
- [x] Map Picker (حوار مربّع + شاشة كاملة) مع موقع المستخدم (النقطة الزرقاء).
- [x] الإمام: إعدادات المسجد → «تحديد/تعديل موقع المسجد على الخريطة».
- [x] إنشاء مسجد: موقع إلزامي — شاشة كاملة، تبدأ من موقع المستخدم، النقر على مكان المسجد بالضبط.

---

## المرحلة 2 — سوبر أدمن (لا نهملها)

الهدف: خريطة واحدة تعرض **كل المساجد ومواقعهم**؛ وسوبر أدمن يقدر يعدّل موقع أي مسجد.

| # | المهمة | تفصيل مختصر |
|---|--------|--------------|
| 1 | ويدجت خريطة عرض | ويدجت يعرض قائمة نقاط (id, name, lat, lng, status) على flutter_map؛ المساجد بدون إحداثيات تُستبعد أو تُعرض في قائمة «بدون موقع». |
| 2 | شاشة خريطة المساجد | شاشة/مسار (مثلاً `/admin/mosques/map`) تجلب كل المساجد وتعرضهم على الويدجت. |
| 3 | ربط بلوحة الأدمن | زر «عرض على الخريطة» في تبويب المساجد يفتح شاشة الخريطة. |
| 4 | تعديل موقع من الأدمن | من تفاصيل مسجد: زر «تحديد الموقع على الخريطة» → Map Picker → حفظ lat/lng. |

**الخطوات التفصيلية والترتيب:** انظر `tasks/todo.md` — قسم «الخطوة التالية: خريطة السوبر أدمن».

---

## المرحلة 3 — (لاحقاً) المسافات وولي الأمر

- [ ] حساب المسافة (Haversine).
- [ ] ولي الأمر: خريطة «مساجد أطفالي» و/أو «المسجد X على بعد Y كم».

## المرحلة 4 — (لاحقاً) اكتشاف مساجد

- [ ] «أقرب المساجد» لولي الأمر أو المشرف.
